?<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaderno de Gramática: Unidad 25</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #ecfeff; /* Cyan-50 background */
            color: #164e63; /* Cyan-900 text */
        }

        h1, h2, h3 {
            font-family: 'Lora', serif;
        }

        /* --- ESTILO DE AYUDA (Dentro de frases) --- */
        .vocab-hint {
            border-bottom: 2px dotted #0891b2;
            cursor: help;
            position: relative;
            display: inline; 
            color: #0e7490;
            font-weight: 700;
        }

        .vocab-hint:hover {
            background-color: #cffafe;
            color: #155e75;
            border-radius: 4px;
        }

        /* El globo de texto (Tooltip) mejorado */
        .vocab-hint:hover::after {
            content: attr(data-en);
            position: absolute;
            bottom: 130%; 
            left: 50%;
            transform: translateX(-50%);
            background-color: #1e293b; 
            color: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 9999; /* Z-index muy alto */
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            pointer-events: none;
            line-height: 1.2;
        }

        /* La flecha del globo */
        .vocab-hint:hover::before {
            content: '';
            position: absolute;
            bottom: 115%; 
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1e293b;
            z-index: 9999;
            pointer-events: none;
        }

        /* --- ESTILOS GENERALES --- */
        .tab-btn {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 700;
            color: #4b5563;
            transition: all 0.3s;
        }
        .tab-btn:hover {
            color: #0891b2;
            background-color: rgba(8, 145, 178, 0.05);
        }
        .tab-btn.active {
            border-bottom: 3px solid #0891b2;
            color: #0891b2;
            background-color: rgba(8, 145, 178, 0.1);
        }

        .tab-content { display: none; opacity: 0; transition: opacity 0.3s ease-in; }
        .tab-content.active { display: block; opacity: 1; }

        input:focus {
            outline: none;
            border-color: #0891b2;
            box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.2);
        }

        .correct {
            border-color: #10b981 !important;
            background-color: #d1fae5 !important;
            color: #065f46 !important;
        }
        .incorrect {
            border-color: #ef4444 !important;
            background-color: #fee2e2 !important;
            color: #991b1b !important;
        }

        /* Scrollbar personalizada para la lista */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

    </style>
</head>
<body class="min-h-screen flex flex-col relative">
<div style="position:fixed;top:20px;left:20px;z-index:9999" class="no-print"><a href="../index.html" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#6366f1;color:white;border-radius:8px;text-decoration:none;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.15);transition:all 0.2s" onmouseover="this.style.background='#4f46e5'" onmouseout="this.style.background='#6366f1'"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>Back to Resources</a></div>


    <!-- Header -->
    <header class="bg-cyan-800 text-white p-6 shadow-md relative z-10">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-project-diagram text-2xl text-cyan-300"></i>
                <span class="uppercase tracking-wider text-xs font-bold text-cyan-300">Español Ab Initio</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold">Unidad 25: Preposiciones y Conectores</h1>
            <p class="text-cyan-100 mt-2">Traducciones visibles para facilitar el aprendizaje.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 md:p-8 relative z-0">
        <div class="max-w-5xl mx-auto bg-white rounded-xl shadow-xl min-h-[600px] border border-gray-100">

            <!-- Tabs Navigation -->
            <div class="flex border-b border-gray-200 overflow-x-auto bg-gray-50 rounded-t-xl">
                <div class="tab-btn active whitespace-nowrap" onclick="openTab('verbs')">
                    <i class="fas fa-link mr-2"></i>1. Verbos + Prep
                </div>
                <div class="tab-btn whitespace-nowrap" onclick="openTab('porpara')">
                    <i class="fas fa-exchange-alt mr-2"></i>2. Por vs Para
                </div>
                <div class="tab-btn whitespace-nowrap" onclick="openTab('mixed')">
                    <i class="fas fa-random mr-2"></i>3. Mezcladas
                </div>
                <div class="tab-btn whitespace-nowrap" onclick="openTab('connectors')">
                    <i class="fas fa-stream mr-2"></i>4. Conectores
                </div>
            </div>

            <!-- TAB 1: VERBOS QUE RIGEN PREPOSICIONES -->
            <div id="verbs" class="tab-content active p-6 md:p-10">
                <h2 class="text-2xl font-bold text-cyan-800 mb-6 border-b pb-2">Verbos que rigen preposiciones</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Theory Sidebar (FIXED: Translations visible inline) -->
                    <div class="lg:col-span-1 space-y-4">
                        <div class="bg-cyan-50 p-5 rounded-lg border border-cyan-100 shadow-sm sticky top-4">
                            <h3 class="font-bold text-cyan-900 mb-3 flex items-center">
                                <i class="fas fa-list-ul mr-2"></i>Lista Clave
                            </h3>
                            <!-- Updated List with Inline Translations -->
                            <ul class="space-y-3 text-sm text-gray-700 h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Soñar con</strong>
                                    <span class="text-gray-500 text-xs">Dream about</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Encontrarse con</strong>
                                    <span class="text-gray-500 text-xs">Meet with / Run into</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Acostumbrarse a</strong>
                                    <span class="text-gray-500 text-xs">Get used to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Invitar a</strong>
                                    <span class="text-gray-500 text-xs">Invite to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Pensar en</strong>
                                    <span class="text-gray-500 text-xs">Think about (something)</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Pensar de</strong>
                                    <span class="text-gray-500 text-xs">Opinion of / Think of</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Cuidar de</strong>
                                    <span class="text-gray-500 text-xs">Take care of</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Rezar por</strong>
                                    <span class="text-gray-500 text-xs">Pray for</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Casarse con</strong>
                                    <span class="text-gray-500 text-xs">Marry</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Ir a</strong>
                                    <span class="text-gray-500 text-xs">Go to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Llegar a</strong>
                                    <span class="text-gray-500 text-xs">Arrive at / Manage to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Consistir en</strong>
                                    <span class="text-gray-500 text-xs">Consist of</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Darse cuenta de</strong>
                                    <span class="text-gray-500 text-xs">Realize</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Asistir a</strong>
                                    <span class="text-gray-500 text-xs">Attend</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Tardar en</strong>
                                    <span class="text-gray-500 text-xs">Take time to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Contar con</strong>
                                    <span class="text-gray-500 text-xs">Count on</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Ayudar a</strong>
                                    <span class="text-gray-500 text-xs">Help to</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Olvidarse de</strong>
                                    <span class="text-gray-500 text-xs">Forget about</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Enamorarse de</strong>
                                    <span class="text-gray-500 text-xs">Fall in love with</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Disfrutar de</strong>
                                    <span class="text-gray-500 text-xs">Enjoy</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Confiar en</strong>
                                    <span class="text-gray-500 text-xs">Trust in</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Preocuparse por</strong>
                                    <span class="text-gray-500 text-xs">Worry about</span>
                                </li>
                                <li class="border-b border-cyan-100 pb-1">
                                    <strong class="text-cyan-900 block">Quejarse de</strong>
                                    <span class="text-gray-500 text-xs">Complain about</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Exercise -->
                    <div class="lg:col-span-2">
                        <h3 class="font-bold text-gray-700 mb-4 text-lg">Ejercicio 1: Rellena con la preposición adecuada</h3>
                        <p class="text-sm text-gray-500 mb-4 italic">Pasa el ratón sobre las palabras azules en las frases para ver pistas extra.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm" id="ex1-container">
                            <!-- JS Generated -->
                        </div>
                        <div class="mt-6 flex justify-end">
                            <button onclick="checkEx1()" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-6 rounded shadow transition">Comprobar</button>
                        </div>
                        <div id="feedback1" class="mt-2 text-right font-bold"></div>
                    </div>
                </div>
            </div>

            <!-- TAB 2: POR VS PARA -->
            <div id="porpara" class="tab-content p-6 md:p-10">
                <h2 class="text-2xl font-bold text-cyan-800 mb-6 border-b pb-2">Por vs. Para</h2>
                
                <div class="mb-8 overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-700 border border-gray-200 rounded-lg overflow-hidden">
                        <thead class="bg-gray-100 text-gray-700 uppercase">
                            <tr>
                                <th class="px-4 py-3 border-r w-1/2">
                                    <div class="font-bold text-cyan-800">Uso de POR</div>
                                    <div class="text-xs text-gray-500 normal-case">Cause, means, duration, movement through</div>
                                </th>
                                <th class="px-4 py-3 w-1/2">
                                    <div class="font-bold text-cyan-800">Uso de PARA</div>
                                    <div class="text-xs text-gray-500 normal-case">Purpose, destination, deadline, recipient</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="bg-white hover:bg-gray-50 transition">
                                <td class="px-4 py-2 border-r">
                                    <strong>Causa:</strong> Lo hago por ti.<br>
                                    <span class="text-xs text-gray-400">Because of you</span>
                                </td>
                                <td class="px-4 py-2">
                                    <strong>Finalidad:</strong> Estudio para aprobar.<br>
                                    <span class="text-xs text-gray-400">In order to pass</span>
                                </td>
                            </tr>
                            <tr class="bg-gray-50 hover:bg-gray-100 transition">
                                <td class="px-4 py-2 border-r">
                                    <strong>Lugar aprox:</strong> Por aquí.<br>
                                    <span class="text-xs text-gray-400">Around here</span>
                                </td>
                                <td class="px-4 py-2">
                                    <strong>Destino:</strong> Salgo para Madrid.<br>
                                    <span class="text-xs text-gray-400">Towards/To Madrid</span>
                                </td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50 transition">
                                <td class="px-4 py-2 border-r">
                                    <strong>Tiempo:</strong> Por la tarde.<br>
                                    <span class="text-xs text-gray-400">In the afternoon (duration)</span>
                                </td>
                                <td class="px-4 py-2">
                                    <strong>Plazo:</strong> Es para mañana.<br>
                                    <span class="text-xs text-gray-400">Due tomorrow (deadline)</span>
                                </td>
                            </tr>
                            <tr class="bg-gray-50 hover:bg-gray-100 transition">
                                <td class="px-4 py-2 border-r">
                                    <strong>Medio:</strong> Por email.<br>
                                    <span class="text-xs text-gray-400">By email</span>
                                </td>
                                <td class="px-4 py-2">
                                    <strong>Destinatario:</strong> Es para mamá.<br>
                                    <span class="text-xs text-gray-400">For mom</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Exercise 2 -->
                    <div>
                        <h3 class="font-bold text-gray-700 mb-3 border-l-4 border-cyan-500 pl-2">Ejercicio 2: Básicos</h3>
                        <div class="space-y-3 text-sm" id="ex2-container">
                            <!-- JS Generated -->
                        </div>
                    </div>

                    <!-- Exercise 3 -->
                    <div>
                        <h3 class="font-bold text-gray-700 mb-3 border-l-4 border-cyan-500 pl-2">Ejercicio 3: Un poco más</h3>
                        <div class="space-y-3 text-sm" id="ex3-container">
                            <!-- JS Generated -->
                        </div>
                    </div>
                </div>

                <div class="mt-6 flex justify-center gap-4">
                    <button onclick="checkEx23()" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-8 rounded shadow transition">Comprobar Ambos</button>
                </div>
                <div id="feedback23" class="mt-2 text-center font-bold"></div>
            </div>

            <!-- TAB 3: PREPOSICIONES MEZCLADAS -->
            <div id="mixed" class="tab-content p-6 md:p-10">
                <h2 class="text-2xl font-bold text-cyan-800 mb-6 border-b pb-2">Preposiciones Mezcladas</h2>
                
                <div class="mb-6 flex flex-wrap gap-2 justify-center">
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">a</span>
                        <div class="text-[10px] text-gray-500">to</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">de</span>
                        <div class="text-[10px] text-gray-500">of/from</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">en</span>
                        <div class="text-[10px] text-gray-500">in/on</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">por</span>
                        <div class="text-[10px] text-gray-500">by/for</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">para</span>
                        <div class="text-[10px] text-gray-500">for</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">con</span>
                        <div class="text-[10px] text-gray-500">with</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">desde</span>
                        <div class="text-[10px] text-gray-500">since</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">hasta</span>
                        <div class="text-[10px] text-gray-500">until</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">sin</span>
                        <div class="text-[10px] text-gray-500">without</div>
                    </div>
                    <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">sobre</span>
                        <div class="text-[10px] text-gray-500">about</div>
                    </div>
                     <div class="px-3 py-1 bg-gray-100 rounded border border-gray-200 text-center">
                        <span class="font-bold text-cyan-800">entre</span>
                        <div class="text-[10px] text-gray-500">between</div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 text-sm" id="ex4-container">
                        <!-- JS Generated -->
                    </div>
                </div>

                <div class="mt-6 flex justify-end">
                    <button onclick="checkEx4()" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-6 rounded shadow transition">Comprobar</button>
                </div>
                <div id="feedback4" class="mt-2 text-right font-bold"></div>
            </div>

            <!-- TAB 4: CONECTORES -->
            <div id="connectors" class="tab-content p-6 md:p-10">
                <h2 class="text-2xl font-bold text-cyan-800 mb-4 border-b pb-2">Los Conectores</h2>
                <p class="mb-4 text-gray-600">Palabras para unir ideas.</p>
                
                <div class="bg-blue-50 p-6 rounded-lg mb-6 border border-blue-100 shadow-inner">
                    <h3 class="font-bold text-blue-900 mb-4 text-sm uppercase tracking-wide">Banco de Palabras (Con traducción)</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <!-- FIXED: Tags now show translation explicitly below -->
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">para que</div>
                            <div class="text-xs text-gray-500">so that</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">como</div>
                            <div class="text-xs text-gray-500">since / as / like</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">porque</div>
                            <div class="text-xs text-gray-500">because</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800 leading-tight">tan pronto como</div>
                            <div class="text-xs text-gray-500">as soon as</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">cuando</div>
                            <div class="text-xs text-gray-500">when</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">hasta que</div>
                            <div class="text-xs text-gray-500">until</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">por eso</div>
                            <div class="text-xs text-gray-500">that's why</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">sino también</div>
                            <div class="text-xs text-gray-500">but also</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">aunque</div>
                            <div class="text-xs text-gray-500">although</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">mientras</div>
                            <div class="text-xs text-gray-500">while</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">sino que</div>
                            <div class="text-xs text-gray-500">but rather (correction)</div>
                        </div>
                        <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">pues</div>
                            <div class="text-xs text-gray-500">well / since</div>
                        </div>
                         <div class="bg-white border border-blue-200 rounded p-2 text-center">
                            <div class="font-bold text-blue-800">por lo tanto</div>
                            <div class="text-xs text-gray-500">therefore</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 text-sm" id="ex5-container">
                        <!-- JS Generated -->
                    </div>
                </div>

                <div class="mt-6 flex justify-end">
                    <button onclick="checkEx5()" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-6 rounded shadow transition">Comprobar</button>
                </div>
                <div id="feedback5" class="mt-2 text-right font-bold"></div>
            </div>

        </div>
    </main>

    <script>
        // --- DATA ---
        
        // Ex 1: Verbos con preposición (Page 87)
        // Note: The hint is now on the Spanish word to prevent HTML breaks
        const ex1Data = [
            { q: "¿Qué <span class='vocab-hint' data-en='Opinion of'>piensas</span> ___ la película?", ans: "de" },
            { q: "Por favor, <span class='vocab-hint' data-en='Help to'>ayúdame</span> ___ hacer la tarea.", ans: "a" },
            { q: "¿Por qué no <span class='vocab-hint' data-en='Attend'>asistes</span> ___ la reunión hoy?", ans: "a" },
            { q: "Puedes <span class='vocab-hint' data-en='Count on'>contar</span> ___ tu hermano.", ans: "con" },
            { q: "Si no <span class='vocab-hint' data-en='Trust in'>confías</span> ___ nosotros, no preguntes.", ans: "en" },
            { q: "Se <span class='vocab-hint' data-en='Fell in love with'>enamoraron</span> el uno ___ otro.", ans: "del" },
            { q: "Estoy <span class='vocab-hint' data-en='Thinking about'>pensando</span> ___ hacer un curso.", ans: "en" },
            { q: "Voy a <span class='vocab-hint' data-en='Complain about'>quejarme</span> ___ sus servicios.", ans: "de" },
            { q: "Mi padre se <span class='vocab-hint' data-en='Worry about'>preocupa</span> mucho ___ mi hermano.", ans: "por" },
            { q: "<span class='vocab-hint' data-en='Went to'>Fuimos</span> ___ Argentina.", ans: "a" },
            { q: "<span class='vocab-hint' data-en='Enjoyed'>Disfrutamos</span> ___ su clima.", ans: "de" },
            { q: "___ <span class='vocab-hint' data-en='With whom'>quién</span> se casó su hermano?", ans: "con" },
            { q: "Habla sin <span class='vocab-hint' data-en='Realizing'>darse cuenta</span> ___ lo que dice.", ans: "de" },
            { q: "Pronto te <span class='vocab-hint' data-en='Get used to'>acostumbrarás</span> ___ la vida nueva.", ans: "a" },
            { q: "Anoche <span class='vocab-hint' data-en='Dreamt about'>soñé</span> ___ Antonio Banderas.", ans: "con" },
            { q: "Es importante <span class='vocab-hint' data-en='Take care of'>cuidar</span> ___ sí mismo.", ans: "de" },
            { q: "Voy a <span class='vocab-hint' data-en='Change (clothes)'>cambiarme</span> ___ ropa.", ans: "de" },
            { q: "Cada día <span class='vocab-hint' data-en='Pray for'>rezo</span> ___ la salud de mi familia.", ans: "por" },
            { q: "El otro día me <span class='vocab-hint' data-en='Ran into'>encontré</span> ___ el marido de Carmen.", ans: "con" },
            { q: "Quiero <span class='vocab-hint' data-en='Invite to'>invitaros</span> ___ la fiesta.", ans: "a" }
        ];

        // Ex 2: Por vs Para
        const ex2Data = [
            { q: "Leo trabaja ___ sostener a su familia.", ans: "para" },
            { q: "Gracias ___ todo lo que has hecho ___ mí.", ans: "por, para" },
            { q: "Las entradas son ___ el cine.", ans: "para" },
            { q: "Pregunta ___ Luna.", ans: "por" },
            { q: "¿___ dónde se ha caído?", ans: "por" },
            { q: "El camión es ___ la navidad de la niña.", ans: "para" },
            { q: "Es famoso ___ sus novelas.", ans: "por" },
            { q: "No te preocupes ___ las notas.", ans: "por" },
            { q: "La clase quiere viajar ___ Puerto Rico.", ans: "para" },
            { q: "Sigue luchando ___ la libertad.", ans: "por" },
            { q: "¿___ quién es el regalo?", ans: "para" },
            { q: "¿Por qué no rezas ___ el bien de tu familia?", ans: "por" },
            { q: "Pagar 150 euros ___ el bus.", ans: "por" },
            { q: "Cambiar esta camiseta ___ otra.", ans: "por" },
            { q: "Optó ___ no asistir ___ evitar conflictos.", ans: "por, para" }
        ];

        // Ex 3: Por vs Para Más
        const ex3Data = [
            { q: "Salgo ___ Panamá mañana.", ans: "para" },
            { q: "Todo lo que hago es ___ mí.", ans: "para" },
            { q: "Te mandaré los documentos ___ correo.", ans: "por" },
            { q: "Estudié alrededor de 25 horas ___ semana.", ans: "por" },
            { q: "Necesito mi portátil ___ trabajar.", ans: "para" },
            { q: "Obtuvo su DELE ___ sus excelentes puntos.", ans: "por" },
            { q: "Llegó pasando ___ las islas Canarias.", ans: "por" },
            { q: "Traducido al francés ___ Leandro.", ans: "por" },
            { q: "La princesa fue recibida ___ los reyes.", ans: "por" },
            { q: "Ha votado ___ Carmen como presidenta.", ans: "por" }
        ];

        // Ex 4: Mezcladas
        const ex4Data = [
            { q: "___ semana trabajamos ___ las 9.00 ___ las 6.00.", ans: "entre, desde, hasta" },
            { q: "No quiero ir ___ ningún sitio ___ ella.", ans: "a, con" },
            { q: "Estoy ___ el colegio. Me iré ___ las 2.00.", ans: "en, a" },
            { q: "Intentas ir ___ pie.", ans: "a" },
            { q: "Vamos al centro ___ autobús.", ans: "en" },
            { q: "No ha comido nada ___ ayer.", ans: "desde" },
            { q: "Se ha quedado sin palabras ___ que ha oído la noticia.", ans: "por" },
            { q: "¿___ cuándo van a estar tus padres?", ans: "hasta" },
            { q: "Deberías saberlo. ___ yo lo sé.", ans: "hasta" },
            { q: "No les permito comer ___ las clases.", ans: "en" },
            { q: "Mañana vamos ___ las montañas.", ans: "hacia" },
            { q: "___ terminar los deberes, puedes ir a jugar.", ans: "después de" },
            { q: "16 ___ 4 igual ___ 4.", ans: "entre, a" },
            { q: "Este juego consiste ___ adivinar.", ans: "en" }
        ];

        // Ex 5: Conectores
        const ex5Data = [
            { q: "Te lo digo ___ lo sepas.", ans: "para que" },
            { q: "___ no me encontraba bien, no te llamé.", ans: "como" },
            { q: "No me gusta este ___ el otro.", ans: "porque" },
            { q: "Te lo dije ___ lo supe.", ans: "tan pronto como" },
            { q: "Voy a ir a pasear ___ haga buen tiempo.", ans: "cuando" },
            { q: "No salió ___ no terminó su trabajo.", ans: "hasta que" },
            { q: "Estaba cansada, ___ no te lo dije.", ans: "por eso" },
            { q: "No solo limpiaron ___ arreglaron la casa.", ans: "sino también" },
            { q: "___ estaba cansada, fui a la fiesta.", ans: "aunque" },
            { q: "Mi madre cocinaba ___ yo estudiaba.", ans: "mientras" },
            { q: "___ llegaron los invitados, la comida estaba lista.", ans: "cuando" },
            { q: "Se lo dije ___ no me hizo caso.", ans: "sino que" }, 
            { q: "Nunca come ___ no llega su padre.", ans: "hasta que" },
            { q: "Me mentiste, ___ ahora paga las consecuencias.", ans: "pues" },
            { q: "Estaba liada, ___ no pudo hablar.", ans: "por lo tanto" }
        ];

        // --- RENDER FUNCTIONS ---
        function renderSimple(containerId, data, prefix) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            data.forEach((item, i) => {
                const parts = item.q.split('___');
                
                let html = `<div class="mb-2 flex flex-wrap items-center"><span class="text-cyan-700 font-bold mr-2 select-none">${i+1}.</span>`;
                
                parts.forEach((part, index) => {
                    html += `<span>${part}</span>`;
                    if (index < parts.length - 1) {
                        html += `<input type="text" id="${prefix}-${i}-${index}" class="border-b-2 border-cyan-300 w-28 text-center mx-1 text-cyan-900 font-bold bg-white focus:bg-cyan-50 transition-colors" autocomplete="off">`;
                    }
                });
                html += `</div>`;
                container.innerHTML += html;
            });
        }

        // --- INIT ---
        window.onload = function() {
            renderSimple('ex1-container', ex1Data, 'ex1');
            renderSimple('ex2-container', ex2Data, 'ex2');
            renderSimple('ex3-container', ex3Data, 'ex3');
            renderSimple('ex4-container', ex4Data, 'ex4');
            renderSimple('ex5-container', ex5Data, 'ex5');
        };

        // --- LOGIC ---
        function openTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            const map = { 'verbs': 0, 'porpara': 1, 'mixed': 2, 'connectors': 3 };
            document.querySelectorAll('.tab-btn')[map[tabId]].classList.add('active');
        }

        function checkAnswersGeneric(data, prefix, feedbackId) {
            let score = 0;
            let total = 0;
            
            data.forEach((item, i) => {
                const correctAnswers = item.ans.split(',').map(s => s.trim().toLowerCase());
                const blankCount = item.q.split('___').length - 1;
                
                for (let j = 0; j < blankCount; j++) {
                    total++;
                    const input = document.getElementById(`${prefix}-${i}-${j}`);
                    const val = input.value.trim().toLowerCase();
                    const correctVal = correctAnswers[j] || correctAnswers[0]; 

                    if (val === correctVal) {
                        input.classList.add('correct');
                        input.classList.remove('incorrect');
                        score++;
                    } else {
                        input.classList.add('incorrect');
                        input.classList.remove('correct');
                    }
                }
            });

            const feedback = document.getElementById(feedbackId);
            feedback.textContent = `Puntuación: ${score} / ${total}`;
            feedback.className = score === total ? "mt-2 text-right font-bold text-green-600" : "mt-2 text-right font-bold text-orange-600";
        }

        function checkEx1() { checkAnswersGeneric(ex1Data, 'ex1', 'feedback1'); }
        function checkEx23() { 
            checkAnswersGeneric(ex2Data, 'ex2', 'feedback23'); 
            checkAnswersGeneric(ex3Data, 'ex3', 'feedback23'); 
            
            let score2 = document.querySelectorAll('#ex2-container .correct').length;
            let total2 = document.querySelectorAll('#ex2-container input').length;
            let score3 = document.querySelectorAll('#ex3-container .correct').length;
            let total3 = document.querySelectorAll('#ex3-container input').length;
            
            const fb = document.getElementById('feedback23');
            let totalScore = score2 + score3;
            let totalMax = total2 + total3;
            fb.textContent = `Total: ${totalScore} / ${totalMax}`;
            fb.className = totalScore === totalMax ? "mt-2 text-center font-bold text-green-600" : "mt-2 text-center font-bold text-orange-600";
        }
        function checkEx4() { checkAnswersGeneric(ex4Data, 'ex4', 'feedback4'); }
        function checkEx5() { checkAnswersGeneric(ex5Data, 'ex5', 'feedback5'); }

    </script>
</body>
</html>






