?<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Grammar Workbook: Unit 4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }

        h1, h2, h3 {
            font-family: 'Lora', serif;
        }

        /* Tooltip style for translations */
        .vocab-hint {
            border-bottom: 2px dotted #6366f1;
            cursor: help;
            position: relative;
            display: inline-block;
            color: #4338ca;
            font-weight: 600;
        }

        .vocab-hint:hover::after {
            content: attr(data-en);
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1f2937;
            color: #fff;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .vocab-hint:hover::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1f2937;
            z-index: 10;
        }

        .correct-answer {
            border-color: #10b981 !important;
            background-color: #d1fae5 !important;
            color: #065f46 !important;
        }

        .incorrect-answer {
            border-color: #ef4444 !important;
            background-color: #fee2e2 !important;
            color: #991b1b !important;
        }

        .btn-primary {
            background-color: #4f46e5;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
            font-weight: 600;
        }
        .btn-primary:hover { background-color: #4338ca; }

        .btn-secondary {
            background-color: #9ca3af;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
            font-weight: 600;
        }
        .btn-secondary:hover { background-color: #6b7280; }
        
        .feedback-msg {
            margin-top: 10px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .card-selectable {
            cursor: pointer;
            transition: all 0.2s;
        }
        .card-selectable:hover {
            border-color: #6366f1;
            background-color: #eef2ff;
        }
        .card-selectable.selected {
            border-color: #4f46e5;
            background-color: #e0e7ff;
            ring: 2px solid #4f46e5;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
<div style="position:fixed;top:20px;left:20px;z-index:9999" class="no-print"><a href="../index.html" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#6366f1;color:white;border-radius:8px;text-decoration:none;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.15);transition:all 0.2s" onmouseover="this.style.background='#4f46e5'" onmouseout="this.style.background='#6366f1'"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>Back to Resources</a></div>


    <!-- Header -->
    <header class="bg-indigo-900 text-white p-6 shadow-lg">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-book-open text-2xl text-indigo-300"></i>
                <span class="uppercase tracking-wider text-xs font-bold text-indigo-300">Grammar & Skills Workbook</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold">Unit 4: Fundamental Rules</h1>
            <p class="text-indigo-200 mt-2">Capitalization & Accentuation (Tildes)</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 md:p-8">
        <div class="max-w-4xl mx-auto space-y-12">

            <!-- CONCEPT 1: CAPITALIZATION -->
            <section id="section-capitals" class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b border-gray-100 bg-indigo-50">
                    <h2 class="text-2xl font-bold text-indigo-900">1. Capitalization (Mayúsculas)</h2>
                    <div class="mt-4 text-gray-700 space-y-3">
                        <p>Unlike English, Spanish uses <strong>lowercase letters (minúsculas)</strong> for:</p>
                        <ul class="list-disc pl-5 bg-white p-4 rounded border border-indigo-100 shadow-sm">
                            <li><strong>Days of the week:</strong> <span class="text-green-600 font-bold">lunes</span> (Monday), <span class="text-green-600 font-bold">martes</span>...</li>
                            <li><strong>Months:</strong> <span class="text-green-600 font-bold">enero</span> (January), <span class="text-green-600 font-bold">abril</span>...</li>
                            <li><strong>Languages:</strong> <span class="text-green-600 font-bold">español</span>, <span class="text-green-600 font-bold">inglés</span>...</li>
                            <li><strong>Nationalities:</strong> <span class="text-green-600 font-bold">mexicano</span>, <span class="text-green-600 font-bold">americano</span>...</li>
                            <li><strong>Religions:</strong> <span class="text-green-600 font-bold">cristiano</span>, <span class="text-green-600 font-bold">musulmán</span>...</li>
                        </ul>
                        <p class="text-sm italic text-gray-500">Note: We ONLY capitalize names of people, places (cities/countries), and the first word of a sentence.</p>
                    </div>
                </div>
                
                <div class="p-6">
                    <h3 class="font-bold text-gray-700 mb-4 flex items-center">
                        <span class="bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2">1</span>
                        Exercise: Which version is correct?
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="ex1-container">
                        <!-- JS Generated -->
                    </div>

                    <div class="mt-6 flex gap-3">
                        <button onclick="checkEx1()" class="btn-primary">Check Answers</button>
                        <button onclick="resetEx1()" class="btn-secondary">Reset</button>
                    </div>
                    <div id="feedback1" class="feedback-msg"></div>
                </div>
            </section>

            <!-- CONCEPT 2: ACCENTUATION -->
            <section id="section-accents" class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b border-gray-100 bg-indigo-50">
                    <h2 class="text-2xl font-bold text-indigo-900">2. Accentuation (Las Tildes)</h2>
                    <p class="text-gray-600 mt-2 mb-4">
                        In Spanish, the written accent (á, é, í, ó, ú) tells you which syllable is stressed (pronounced strongest).
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div class="bg-blue-50 p-3 rounded border border-blue-200">
                            <h4 class="font-bold text-blue-800 mb-1">Rule 1: Agudas</h4>
                            <p>Stress on the <strong>LAST</strong> syllable.</p>
                            <p class="mt-1 text-gray-600">Add accent if it ends in: <br><strong>N, S, or Vowel</strong>.</p>
                            <p class="mt-2 font-mono text-blue-700">ja-pón, a-dios, pa-pá</p>
                        </div>
                        <div class="bg-green-50 p-3 rounded border border-green-200">
                            <h4 class="font-bold text-green-800 mb-1">Rule 2: Llanas</h4>
                            <p>Stress on the <strong>2nd to LAST</strong> syllable.</p>
                            <p class="mt-1 text-gray-600">Add accent if it ends in: <br><strong>Consonant (except N/S)</strong>.</p>
                            <p class="mt-2 font-mono text-green-700">ár-bol, lá-piz</p>
                        </div>
                        <div class="bg-purple-50 p-3 rounded border border-purple-200">
                            <h4 class="font-bold text-purple-800 mb-1">Rule 3: Esdrújulas</h4>
                            <p>Stress on the <strong>3rd to LAST</strong> syllable.</p>
                            <p class="mt-1 text-gray-600"><strong>ALWAYS</strong> have an accent.</p>
                            <p class="mt-2 font-mono text-purple-700">mú-si-ca, mé-di-co</p>
                        </div>
                    </div>
                    <p class="mt-4 text-sm text-gray-600">
                        <strong>Tip:</strong> Question words (Qué, Cómo, Cuándo...) always have an accent when asking a question!
                    </p>
                </div>
                
                <div class="p-6">
                    <h3 class="font-bold text-gray-700 mb-4 flex items-center">
                        <span class="bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2">2</span>
                        Exercise: Choose the word with the correct accent
                    </h3>
                    <p class="text-sm text-gray-500 mb-4 italic">Only one option is spelled correctly.</p>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="ex2-container">
                        <!-- JS Generated -->
                    </div>

                    <div class="mt-6 flex gap-3">
                        <button onclick="checkEx2()" class="btn-primary">Check Answers</button>
                        <button onclick="resetEx2()" class="btn-secondary">Reset</button>
                    </div>
                    <div id="feedback2" class="feedback-msg"></div>
                </div>
            </section>

            <!-- BONUS: PUNCTUATION -->
            <section id="section-punctuation" class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b border-gray-100 bg-indigo-50">
                    <h2 class="text-2xl font-bold text-indigo-900">3. Question & Exclamation Marks</h2>
                    <p class="text-gray-600 mt-2">
                        Spanish is unique! We use opening marks at the beginning of the sentence.
                    </p>
                </div>
                <div class="p-6 flex justify-around text-center">
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <div class="text-4xl font-bold text-indigo-600 mb-2">¿...?</div>
                        <p class="text-sm">Questions</p>
                        <p class="text-xs text-gray-500 mt-1">¿Cómo estás?</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <div class="text-4xl font-bold text-indigo-600 mb-2">¡...!</div>
                        <p class="text-sm">Exclamations</p>
                        <p class="text-xs text-gray-500 mt-1">¡Hola!</p>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white p-6 mt-12 text-center text-sm">
        <p>Beginner Spanish Grammar Practice | Based on Raquel MC materials</p>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- DATA ---
        
        // Ex 1: Capitalization
        const ex1Data = [
            { 
                correct: "Hoy es lunes.", 
                wrong: "Hoy es Lunes.", 
                hint: "Today is Monday" 
            },
            { 
                correct: "Yo hablo español.", 
                wrong: "Yo hablo Español.", 
                hint: "I speak Spanish" 
            },
            { 
                correct: "Mi amigo es francés.", 
                wrong: "Mi amigo es Francés.", 
                hint: "My friend is French" 
            },
            { 
                correct: "Mi cumpleaños es en mayo.", 
                wrong: "Mi cumpleaños es en Mayo.", 
                hint: "My birthday is in May" 
            },
            { 
                correct: "Vivo en Madrid.", 
                wrong: "Vivo en madrid.", 
                hint: "I live in Madrid (City name)" 
            }
        ];

        // Ex 2: Accents
        const ex2Data = [
            { 
                correct: "teléfono", 
                wrong: "telefono", 
                hint: "telephone (Esdrújula)" 
            },
            { 
                correct: "camión", 
                wrong: "camion", 
                hint: "truck (Aguda ending in n)" 
            },
            { 
                correct: "lápiz", 
                wrong: "lapiz", 
                hint: "pencil (Llana ending in z)" 
            },
            { 
                correct: "fútbol", 
                wrong: "futbol", 
                hint: "soccer (Llana ending in l)" 
            },
            { 
                correct: "inglés", 
                wrong: "ingles", 
                hint: "English (Aguda ending in s)" 
            },
            { 
                correct: "¿Qué hora es?", 
                wrong: "¿Que hora es?", 
                hint: "What time is it? (Question word)" 
            }
        ];

        // --- RENDER ---

        function init() {
            renderEx1();
            renderEx2();
        }

        function renderEx1() {
            const container = document.getElementById('ex1-container');
            container.innerHTML = '';
            ex1Data.forEach((item, i) => {
                // Randomize order
                const options = Math.random() < 0.5 ? [item.correct, item.wrong] : [item.wrong, item.correct];
                
                let html = `
                <div class="bg-gray-50 p-4 rounded border border-gray-200">
                    <p class="text-sm text-gray-500 mb-2 italic">${item.hint}</p>
                    <div class="flex flex-col gap-2">`;
                
                options.forEach(opt => {
                    const isCorrect = opt === item.correct;
                    html += `
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="ex1-${i}" value="${isCorrect ? 'correct' : 'wrong'}" class="w-4 h-4 text-indigo-600 focus:ring-indigo-500">
                            <span class="text-gray-800">${opt}</span>
                        </label>`;
                });

                html += `</div></div>`;
                container.innerHTML += html;
            });
        }

        function renderEx2() {
            const container = document.getElementById('ex2-container');
            container.innerHTML = '';
            ex2Data.forEach((item, i) => {
                // Randomize order
                const options = Math.random() < 0.5 ? [item.correct, item.wrong] : [item.wrong, item.correct];
                
                let html = `
                <div class="bg-gray-50 p-4 rounded border border-gray-200">
                    <p class="text-sm text-gray-500 mb-2 italic">${item.hint}</p>
                    <div class="flex gap-4">`;
                
                options.forEach(opt => {
                    const isCorrect = opt === item.correct;
                    // Using buttons for variety
                    html += `
                        <button onclick="selectOption(this, ${i}, '${isCorrect}')" class="ex2-btn-${i} px-4 py-2 bg-white border border-gray-300 rounded hover:bg-indigo-50 transition w-full text-center">
                            ${opt}
                        </button>`;
                });

                html += `</div><input type="hidden" id="ex2-val-${i}" value=""></div>`;
                container.innerHTML += html;
            });
        }

        // Helper for Ex2 button selection
        window.selectOption = function(btn, index, isCorrect) {
            // Reset styles for this group
            const buttons = document.querySelectorAll(`.ex2-btn-${index}`);
            buttons.forEach(b => {
                b.classList.remove('bg-indigo-100', 'border-indigo-500', 'ring-2', 'ring-indigo-300');
                b.classList.add('bg-white', 'border-gray-300');
            });
            
            // Set style for selected
            btn.classList.remove('bg-white', 'border-gray-300');
            btn.classList.add('bg-indigo-100', 'border-indigo-500', 'ring-2', 'ring-indigo-300');
            
            // Store value
            document.getElementById(`ex2-val-${index}`).value = isCorrect;
        }

        // --- CHECK ---

        function checkEx1() {
            let s = 0;
            ex1Data.forEach((_, i) => {
                const selected = document.querySelector(`input[name="ex1-${i}"]:checked`);
                const parentDiv = document.getElementsByName(`ex1-${i}`)[0].closest('.bg-gray-50');
                
                // Clear previous colors
                parentDiv.classList.remove('correct-answer', 'incorrect-answer');

                if (selected) {
                    if (selected.value === 'correct') {
                        s++;
                        parentDiv.classList.add('correct-answer');
                    } else {
                        parentDiv.classList.add('incorrect-answer');
                    }
                }
            });
            updateFeedback('feedback1', s, ex1Data.length);
        }

        function checkEx2() {
            let s = 0;
            ex2Data.forEach((_, i) => {
                const val = document.getElementById(`ex2-val-${i}`).value;
                // Visual feedback is tricky with buttons, let's color the container
                const container = document.getElementById(`ex2-val-${i}`).parentElement;
                container.classList.remove('correct-answer', 'incorrect-answer');

                if (val === 'true') {
                    s++;
                    container.classList.add('correct-answer');
                } else if (val === 'false') {
                    container.classList.add('incorrect-answer');
                }
            });
            updateFeedback('feedback2', s, ex2Data.length);
        }

        function updateFeedback(id, score, total) {
            const el = document.getElementById(id);
            el.textContent = `Score: ${score} / ${total}`;
            el.className = score === total ? "feedback-msg text-green-600" : "feedback-msg text-indigo-600";
        }

        // --- RESET ---

        function resetEx1() {
            const radios = document.querySelectorAll('input[type="radio"]');
            radios.forEach(r => r.checked = false);
            const divs = document.querySelectorAll('#ex1-container > div');
            divs.forEach(d => d.classList.remove('correct-answer', 'incorrect-answer'));
            document.getElementById('feedback1').textContent = "";
        }

        function resetEx2() {
            // Reset hidden values
            ex2Data.forEach((_, i) => document.getElementById(`ex2-val-${i}`).value = "");
            // Reset styles
            const buttons = document.querySelectorAll(`button[class*="ex2-btn"]`);
            buttons.forEach(b => {
                b.classList.remove('bg-indigo-100', 'border-indigo-500', 'ring-2', 'ring-indigo-300');
                b.classList.add('bg-white', 'border-gray-300');
            });
            const divs = document.querySelectorAll('#ex2-container > div');
            divs.forEach(d => d.classList.remove('correct-answer', 'incorrect-answer'));
            document.getElementById('feedback2').textContent = "";
        }

        init();
    </script>
</body>
</html>






